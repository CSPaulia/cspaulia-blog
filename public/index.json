[{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。hhh II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。hhh\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"},{"content":"自定义post_meta显示 最后编辑(Lastmod)\n在config.yaml中添加：\nfrontmatter: date: - date - publishDate - lastmod lastmod: - :git - :fileModTime - lastmod - date - publishDate 最后编辑时间會根據frontmatter中的順序取值\n:git：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功) :fileModTime：根據本機的文件最後修改紀錄 lastmod：可以在文章的frontmatter區塊中直接設定 date：可以在文章的frontmatter區塊中直接設定 publishDate：文章發布的日期 修改 post_meta.html 文件\n\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt; {{ $scratch := newScratch }} {{ if not .Date.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;3\u0026#34; y=\u0026#34;4\u0026#34; width=\u0026#34;18\u0026#34; height=\u0026#34;18\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/rect\u0026gt;\u0026lt;line x1=\u0026#34;16\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;2\u0026#34; x2=\u0026#34;8\u0026#34; y2=\u0026#34;6\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;3\u0026#34; y1=\u0026#34;10\u0026#34; x2=\u0026#34;21\u0026#34; y2=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if not .Lastmod.IsZero }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M2 2l7.586 7.586\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;11\u0026#34; cy=\u0026#34;11\u0026#34; r=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }} {{ end }} {{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;path d=\u0026#34;M14 2v6h6\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;13\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;13\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;17\u0026#34; x2=\u0026#34;16\u0026#34; y2=\u0026#34;17\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;line x1=\u0026#34;8\u0026#34; y1=\u0026#34;9\u0026#34; x2=\u0026#34;12\u0026#34; y2=\u0026#34;9\u0026#34;\u0026gt;\u0026lt;/line\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }} {{ end }} {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;12\u0026#34; r=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;polyline points=\u0026#34;12 6 12 12 16 14\u0026#34;\u0026gt;\u0026lt;/polyline\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }} {{ end }} {{ with (partial \u0026#34;author.html\u0026#34; .) }} {{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u0026lt;span class=\u0026#34;post-meta-item\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026#34;12\u0026#34; cy=\u0026#34;7\u0026#34; r=\u0026#34;4\u0026#34;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; %s\u0026lt;/span\u0026gt;` .)) }} {{ end }} {{ with ($scratch.Get \u0026#34;meta\u0026#34;) }} {{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }} {{ end }} 添加 CSS 样式来调整图标的显示效果\n/* assests/css/extended/blank.css */ .post-meta-item { display: inline-flex; align-items: center; gap: 4px; } .post-meta-item svg { stroke: var(--secondary); } 列表页面隐藏 （可选）\n若不希望列表页出现ReadingTime，则复制一份layouts/partials/post_meta.html，命名为post_meta_list.html，将post_meta_list.html中的如下代码删去\n\u0026lt;!-- layouts/partials/post_meta_list.html --\u0026gt; \u0026lt;!-- 删掉 --\u0026gt; {{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }} ... {{ end }} 并在layouts/_default/list.html中将：\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; {{- partial \u0026#34;post_meta_list.html\u0026#34; . -}} 代码块改进 代码块缩进设置 在 blank.css 中添加以下代码：\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ margin-left: 2em; /* 缩进距离 */ } .post-content li pre { /* 列表中的代码块额外缩进 */ margin-left: 4em; /* 列表中的代码块缩进更多 */ } PaperMod 主题的语法高亮设置 config.yaml中设置正确的语法高亮：\nparams: # ...existing code... assets: disableHLJS: false # 启用 highlight.js # 设置代码高亮主题 syntax_highlighter: \u0026#34;highlight.js\u0026#34; 限制代码块长度 限制代码块长度，超出部分滚动\n/* assets/css/extended/blank.css */ .post-content pre { /* 代码块缩进样式 */ max-height: 400px; /* 最大高度，可自定义 */ overflow: auto; /* 超出部分滚动 */ } 设置滚动条大小\n.post-content pre::-webkit-scrollbar { width: 10px; /* 更细的滚动条 */ height: 10px; } 博客文章封面图片缩小并移到侧边 复制list.html\n从themes/PaperMod/layouts/_default/list.html中复制一份list.html放置于layouts/_default/list.html，并将\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsSingle\u0026#34; false \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;entry-hint-parent\u0026#34;\u0026gt; {{- .Title }} {{- if .Draft }} \u0026lt;span class=\u0026#34;entry-hint\u0026#34; title=\u0026#34;Draft\u0026#34;\u0026gt; \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; height=\u0026#34;20\u0026#34; viewBox=\u0026#34;0 -960 960 960\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; {{- end }} \u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;div class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/list.html --\u0026gt; \u0026lt;article class=\u0026#34;{{ $class }}\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-info\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;entry-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{ .Title }}\u0026lt;/h2\u0026gt; \u0026lt;/header\u0026gt; {{- if .Description }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Description }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- else if (ne (.Param \u0026#34;hideSummary\u0026#34;) true) }} \u0026lt;section class=\u0026#34;entry-content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; {{- end }} {{- if not (.Param \u0026#34;hideMeta\u0026#34;) }} \u0026lt;footer class=\u0026#34;entry-footer\u0026#34;\u0026gt; {{- partial \u0026#34;post_meta.html\u0026#34; . -}} \u0026lt;/footer\u0026gt; {{- end }} \u0026lt;/div\u0026gt; {{- $isHidden := (.Param \u0026#34;cover.hiddenInList\u0026#34;) | default (.Param \u0026#34;cover.hidden\u0026#34;) | default false }} {{- partial \u0026#34;cover.html\u0026#34; (dict \u0026#34;cxt\u0026#34; . \u0026#34;IsHome\u0026#34; true \u0026#34;isHidden\u0026#34; $isHidden) }} \u0026lt;a class=\u0026#34;entry-link\u0026#34; aria-label=\u0026#34;post link to {{ .Title | plainify }}\u0026#34; href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/article\u0026gt; 添加自定义样式\n/* assets/css/extended/blank.css */ .post-entry { display: flex; flex-direction: row; align-items: center; } .entry-cover { overflow: hidden; /* padding-left: 18px; */ height: 100%; width: 50%; margin-bottom: unset; border-radius: 12px; /* 你可以根据需要调整圆角大小 */ } .entry-cover img { border-radius: 12px; } .post-info { display: inline-block; overflow: hidden; width: 90%; } 侧边首图放大动画\n/* assets/css/extended/blank.css */ .post-entry img{ transition: all 0.3s ease-out; transform:scale(1,1); } .post-entry:hover img{ transition: all 0.3s ease-out; transform:scale(1.02,1.02); } 自定义 Post Footer 复制single.html 在路径themes/PaperMod/layouts/_default找到single.html这个文件，复制到layouts/_default/single.html这个位置\n修改post-footer段落 找到\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; ... \u0026lt;/footer\u0026gt; 修改为\n\u0026lt;!-- layouts/_default/single.html --\u0026gt; \u0026lt;footer class=\u0026#34;post-footer\u0026#34;\u0026gt; {{- $tags := .Language.Params.Taxonomies.tag | default \u0026#34;tags\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;tags:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $tags) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- $categories := .Language.Params.Taxonomies.categories | default \u0026#34;categories\u0026#34; }} \u0026lt;p style=\u0026#34;font-size: medium; margin-bottom: 5px; font-weight: bold;\u0026#34;\u0026gt;categories:\u0026lt;/p\u0026gt; \u0026lt;ul class=\u0026#34;post-tags\u0026#34;\u0026gt; {{- range ($.GetTerms $categories) }} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .LinkTitle }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {{- end }} \u0026lt;/ul\u0026gt; {{- if (.Param \u0026#34;ShowPostNavLinks\u0026#34;) }} {{- partial \u0026#34;post_nav_links.html\u0026#34; . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \u0026#34;share_icons.html\u0026#34; . -}} {{- end }} \u0026lt;/footer\u0026gt; 效果 博客末尾放参考链接 在blank.css里加一点样式\n/* assets/css/extended/blank.css */ /* 浅色模式 */ .zhihu-ref { background: #f6f7fa; border-radius: 8px; padding: 1.2em 1.5em 1.2em 1.5em; margin-top: 2em; font-size: 1em; box-shadow: 0 2px 8px rgba(0,0,0,0.03); border-left: 4px solid #0084ff; transition: background 0.3s, border-color 0.3s; } .zhihu-ref-title { font-weight: bold; color: #175199; margin-bottom: 0.5em; font-size: 1.1em; } .zhihu-ref a { color: #175199; } .zhihu-ref a:hover { color: #0084ff; } /* 深色模式（PaperMod主题深色class为 .dark） */ .dark .zhihu-ref { background: #23272e; border-left: 4px solid #3ea6ff; } .dark .zhihu-ref-title, .dark .zhihu-ref a { color: #3ea6ff; } .dark .zhihu-ref a:hover { color: #8cc8ff; } markdown中语法如下\n\u0026lt;hr\u0026gt; \u0026lt;div class=\u0026#34;references\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;参考资料\u0026lt;/h3\u0026gt; \u0026lt;ol\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://gohugo.io/documentation/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Hugo 官方文档\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://github.com/adityatelange/hugo-PaperMod\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;PaperMod 主题\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;https://www.markdownguide.org/\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;Markdown Guide\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; 效果如下\n侧边目录设置 在layouts/partials文件夹下创建toc.html，添加如下代码：\n\u0026lt;!-- layouts/partials/toc.html --\u0026gt; {{- $headers := findRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;(.|\\n])+?\u0026lt;/h[1-6]\u0026gt;\u0026#34; .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u0026lt;aside id=\u0026#34;toc-container\u0026#34; class=\u0026#34;toc-container wide\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;toc\u0026#34;\u0026gt; \u0026lt;details {{if (.Param \u0026#34;TocOpen\u0026#34;) }} open{{ end }}\u0026gt; \u0026lt;summary accesskey=\u0026#34;c\u0026#34; title=\u0026#34;(Alt + C)\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;details\u0026#34;\u0026gt;{{- i18n \u0026#34;toc\u0026#34; | default \u0026#34;Table of Contents\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/summary\u0026gt; \u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt; {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice -}} \u0026lt;ul\u0026gt; {{- range seq (sub $firstHeaderLevel $largest) -}} \u0026lt;ul\u0026gt; {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \u0026#34;[1-6]\u0026#34; . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\u0026#34;xyz\u0026#34; */}} {{- $id := index (findRE \u0026#34;(id=\\\u0026#34;(.*?)\\\u0026#34;)\u0026#34; $header 9) 0 }} {{- /* strip id=\u0026#34;\u0026#34; to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \u0026#34;id=\\\u0026#34;\u0026#34; \u0026#34;\u0026#34;) \u0026#34;\\\u0026#34;\u0026#34; \u0026#34;\u0026#34; }} {{- $header := replaceRE \u0026#34;\u0026lt;h[1-6].*?\u0026gt;((.|\\n])+?)\u0026lt;/h[1-6]\u0026gt;\u0026#34; \u0026#34;$1\u0026#34; $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u0026lt;ul\u0026gt; {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; . -}} {{- end -}} {{- end -}} {{- else -}} \u0026lt;/li\u0026gt; {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) . -}} \u0026lt;/ul\u0026gt; {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Delete \u0026#34;bareul\u0026#34; -}} {{- $.Scratch.Set \u0026#34;bareul\u0026#34; slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \u0026#34;bareul\u0026#34; (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end -}} {{- end -}} {{- end }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- else }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;#{{- $cleanedID -}}\u0026#34; aria-label=\u0026#34;{{- $header | plainify -}}\u0026#34;\u0026gt;{{- $header | safeHTML -}}\u0026lt;/a\u0026gt; {{- end -}} {{- end -}} \u0026lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers 0) 1) 0)) -}} --\u0026gt; {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \u0026#34;[1-6]\u0026#34; (index $headers (sub (len $headers) 1)) 1) 0)) }} \u0026lt;/li\u0026gt; {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \u0026#34;bareul\u0026#34;) (add . $firstHeaderLevel) }} \u0026lt;/ul\u0026gt; {{- else }} \u0026lt;/ul\u0026gt; \u0026lt;/li\u0026gt; {{- end -}} {{- end }} \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/details\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/aside\u0026gt; \u0026lt;script\u0026gt; let activeElement; let elements; window.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function (event) { checkTocPosition(); elements = document.querySelectorAll(\u0026#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\u0026#39;); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); }, false); window.addEventListener(\u0026#39;resize\u0026#39;, function(event) { checkTocPosition(); }, false); window.addEventListener(\u0026#39;scroll\u0026#39;, () =\u0026gt; { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u0026gt; { if ((getOffsetTop(element) - window.pageYOffset) \u0026gt; 0 \u0026amp;\u0026amp; (getOffsetTop(element) - window.pageYOffset) \u0026lt; window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u0026gt; { const id = encodeURI(element.getAttribute(\u0026#39;id\u0026#39;)).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.add(\u0026#39;active\u0026#39;); } else { document.querySelector(`.inner ul li a[href=\u0026#34;#${id}\u0026#34;]`).classList.remove(\u0026#39;active\u0026#39;); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--article-width\u0026#39;), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--toc-width\u0026#39;), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue(\u0026#39;--gap\u0026#39;), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u0026gt; 0) { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.add(\u0026#34;wide\u0026#34;); } else { document.getElementById(\u0026#34;toc-container\u0026#34;).classList.remove(\u0026#34;wide\u0026#34;); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u0026lt;/script\u0026gt; {{- end }} 修改css:\n/* assets/css/extended/blank.css */ :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 参考文献 小M平碎碎念-小M平部落格整形手術 CSDN-Hugo博客PaperMod主题目录放在侧边 ","permalink":"http://localhost:1313/cspaulia-blog/posts/hugo-papermod/","summary":"\u003ch2 id=\"自定义post_meta显示\"\u003e自定义post_meta显示\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e最后编辑(Lastmod)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003econfig.yaml\u003c/code\u003e中添加：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003efrontmatter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003elastmod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003egit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"l\"\u003efileModTime\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003elastmod\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003edate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e- \u003cspan class=\"l\"\u003epublishDate\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e最后编辑时间會根據frontmatter中的順序取值\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:git\u003c/code\u003e：會去抓git提交紀錄的日期，且必須於config.yml中啟用enableGitInfo = true(沒試成功)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:fileModTime\u003c/code\u003e：根據本機的文件最後修改紀錄\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elastmod\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edate\u003c/code\u003e：可以在文章的frontmatter區塊中直接設定\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublishDate\u003c/code\u003e：文章發布的日期\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e修改 post_meta.html 文件\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- layouts/partials/post_meta.html --\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch := newScratch }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Date.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e \u003cspan class=\"na\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;18\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003erx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ery\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;21\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Date | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if not .Lastmod.IsZero }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M12 19l7-7 3 3-7 7-3-3z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M2 2l7.586 7.586\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;11\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (.Lastmod | time.Format (default \u0026#34;January 2, 2006\u0026#34; site.Params.DateFormat)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowWordCount\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M14 2v6h6\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;13\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;17\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e \u003cspan class=\"na\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ey2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;9\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;words\u0026#34; .WordCount | default (printf \u0026#34;%d words\u0026#34; .WordCount)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ if (.Param \u0026#34;ShowReadingTime\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;10\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e \u003cspan class=\"na\"\u003epoints\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12 6 12 12 16 14\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epolyline\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` (i18n \u0026#34;read_time\u0026#34; .ReadingTime | default (printf \u0026#34;%d min\u0026#34; .ReadingTime)))) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with (partial \u0026#34;author.html\u0026#34; .) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ $scratch.Add \u0026#34;meta\u0026#34; (slice (printf `\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;post-meta-item\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;16\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;0 0 24 24\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003efill\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;none\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;currentColor\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-width\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linecap\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003estroke-linejoin\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;round\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"na\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e \u003cspan class=\"na\"\u003ecx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;12\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003ecy\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e \u003cspan class=\"na\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ecircle\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003esvg\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e %s\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e` .)) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ with ($scratch.Get \u0026#34;meta\u0026#34;) }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ delimit . \u0026#34; ｜ \u0026#34; | safeHTML }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{{ end }}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e添加 CSS 样式来调整图标的显示效果\u003c/strong\u003e\u003c/p\u003e","title":"PaperMod进化论"},{"content":"I. CLIP 对比预训练：\n从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\nN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\nN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\n将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\n将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\n从 label 中构建数据分类器：\n用文本标签构建句子，送入文本编码器得到文本特征。 用于zero-shot预测：\n将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。 II. 利用CLIP做语义分割 2.1 LSeg 与CLIP的关系：\n利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\n文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\n与CLIP不同的点：\n方法 训练方式 文本编码器参数 相似度计算 CLIP 对比学习 可训练 计算图像文本对的相似度 LSeg 有监督学习 冻结 计算图像特征与文本特征之间的相似度 CLIP的输入：多个图像文本对 LSeg的输入：一张图像+标签（可看作图像的描述文本） 2.2 GroupViT 与CLIP和LSeg的关系： 方法 训练方式 相似度计算 CLIP 对比学习 计算图像文本对的相似度 LSeg 有监督学习 计算图像特征与文本特征之间的相似度 GroupViT 对比学习 计算图像文本对的相似度 LSeg的训练方式：利用已经对齐好的 CLIP 特征空间进行有监督训练； GroupViT的训练方式：调整CLIP中视觉编码器的架构，以适应语义分割任务，进行与CLIP一致的对比学习。 架构细节： 模型输入：图像Patchs + 可学习Group Tokens 分割流程：通过Group Block将Patch特征分配给可学习Group Tokens 可学习Group Tokens：类似于聚类中心 III. 利用CLIP做目标检测 3.1 ViLD Vanilla Detector = Head + Classifier + 交叉熵有监督 ViLD-text = Head + 相似度匹配 + 交叉熵有监督 相似度匹配流程（CLIP流程）： n个标签通过提示词工程送入文本编码器得到n个文本编码； 为防止文本编码无法描述所有region embeddings，引入背景编码描述剩余的region embeddings； region embeddings与文本编码和背景编码做相似度匹配，得到n个Text Embeddings和一个Background，这一步替代Classifier，且在训练中冻结\u0026#x2744;\u0026#xfe0f;； ViLD-image = 教师网络 + 学生网络 + L1知识蒸馏 教师网络：CLIP图像编码器 学生网络：Vanilla Detector 为了减少训练量，利用预训练检测模型提前提取m个region embeddings ViLD = ViLD-text + ViLD-image IV. 利用CLIP做Visual Grounding 4.1 GLIP 本质为有监督训练； 计算Regions和Words之间的相似度，从而完成Regions的分类/caption。 模型的训练阶段，必须知道Regions和Caption中Words之间的对应关系，为此： Detection数据集：利用Bounding Boxes的标注构造Caption（例如Banana\u0026ndash;\u0026gt;There is a banana.） Caption数据集：利用在Detection数据集上训练好的GLIP模型在Caption数据集中找到Regions和Words之间的关系，构造伪标签。 V. 利用CLIP做图像生成 5.1 CLIPasso 工作出发点 发现问题：以往的简笔画生成方法，仅适用于某一特定类别\n解决问题：利用CLIP模型强大的泛化性，完成对所有类别的简笔画生成\n工作流程 生成简笔画： 首先利用图像编码器，获取图像的热图 根据热图采样点 通过可学习参数聚合点，生成贝兹曲线，从而获得简笔画 利用CLIP约束生成： 将生成的简笔画和原图送入两个不同的CLIP图像编码器 $L_g$约束两张图的几何信息，越接近越好 $L_s$约束两张图的语义信息，越接近越好 VI. 利用CLIP做视频检索 6.1 CLIP4Clip 工作出发点 CLIP是为图像-文本对设计的模型。对于视频检索任务来说，其本质上是一段文本和多张图像（视频帧）进行匹配，找到最相关的视频帧 CLIP4Clip ","permalink":"http://localhost:1313/cspaulia-blog/posts/clip/","summary":"\u003ch2 id=\"i-clip\"\u003eI. CLIP\u003c/h2\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"clip.png\" alt=\"clip\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e对比预训练：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e从网络上收集N个图片-文本对（OpenAI收集了4亿个图片文本对）作为正样本；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片与剩下的N-1张图片对应的文本组成数据对，作为负样本（即文本描述和图片内容不符）；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eN张图片送入图像编码器，对应文本送入文本编码器，将图像特征与文本特征做点积，得到相似度矩阵；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一行当作是一个N类预测的结果，以第 i 行为例，为了使第 i 行、第 i 列的值最大（在第 i 行中相似度最大），我们的 label 应该也是 i，将第 i 行与 label 作 cross entropy，即可完成矩阵的优化；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将矩阵的每一列当作是一个N类预测的结果，以第 i 列为例，为了使第 i 列、第 i 行的值最大（在第 i 列中相似度最大），我们的 label 应该也是 i，将第 i 列与 label 作 cross entropy，即可完成矩阵的优化。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e从 label 中构建数据分类器：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用文本标签构建句子，送入文本编码器得到文本特征。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e用于zero-shot预测：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将标签构建的文本特征与图像特征进行相似度匹配，从而完成预测。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ii-利用clip做语义分割\"\u003eII. 利用CLIP做语义分割\u003c/h2\u003e\n\u003ch3 id=\"21-lseg\"\u003e2.1 LSeg\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"lseg.png\" alt=\"lseg\" /\u003e\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP的关系：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e利用已经对齐好的 CLIP 特征空间，将语义标签和像素特征映射到同一空间，通过相似性进行分割预测；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文本编码器：与CLIP保持一致，训练时不更新参数\u0026#x2744;\u0026#xfe0f;；\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e与CLIP不同的点：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e方法\u003c/th\u003e\n          \u003cth\u003e训练方式\u003c/th\u003e\n          \u003cth\u003e文本编码器参数\u003c/th\u003e\n          \u003cth\u003e相似度计算\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCLIP\u003c/td\u003e\n          \u003ctd\u003e对比学习\u003c/td\u003e\n          \u003ctd\u003e可训练\u003c/td\u003e\n          \u003ctd\u003e计算图像文本对的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLSeg\u003c/td\u003e\n          \u003ctd\u003e有监督学习\u003c/td\u003e\n          \u003ctd\u003e冻结\u003c/td\u003e\n          \u003ctd\u003e计算图像特征与文本特征之间的相似度\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eCLIP的输入：多个图像文本对\u003c/li\u003e\n\u003cli\u003eLSeg的输入：一张图像+标签（可看作图像的描述文本）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-groupvit\"\u003e2.2 GroupViT\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"groupvit_overview.png\" alt=\"groupvit_overview\" width=\"50%\" /\u003e\n\u003c/p\u003e","title":"CLIP及其改进工作"},{"content":"screen基本命令 新建一个screen会话 screen -S \u0026lt;名字\u0026gt; 查看所有screen会话 screen -ls 恢复之前分离的会话 screen -r \u0026lt;会话ID\u0026gt; 退出当前screen会话 键盘点击ctrl+a , 然后按d 查看当前所在会话(id.name) echo $STY 关闭会话 如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\n删除会话\nscreen -X -S session_name quit 清理会话 screen -wipe #清理那些dead的会话 ","permalink":"http://localhost:1313/cspaulia-blog/posts/screen/","summary":"\u003ch2 id=\"screen基本命令\"\u003escreen基本命令\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e新建一个screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -S \u0026lt;名字\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看所有screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -ls\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e恢复之前分离的会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -r \u0026lt;会话ID\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e退出当前screen会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e键盘点击ctrl+a , 然后按d\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e查看当前所在会话(id.name)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho $STY\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e关闭会话\n如果在会话之中，输入exit或者Ctrl+d来终止这个会话。成功终止后，如果有其他处于Attached状态的screen界面，他就会跳到那个界面中，如果没有，他就会跳到默认界面上。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除会话\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -X -S session_name quit\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e清理会话\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003escreen -wipe #清理那些dead的会话\n\u003c/code\u003e\u003c/pre\u003e","title":"终端多路复用工具Screen的用法"},{"content":"Cross Attention 来自博客\n简介 Cross Attention是：\n融合两种不同的嵌入序列的注意力机制 两个序列必须包含相同的维度 两个序列可以来自不同的模态（例如文本、图像、声音） 其中一个序列作为Query的输入，决定了输出的长度 另一个序列作为Key和Value的输入 Cross Attention vs Self-attention Cross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\nCross Attention算法 拥有两个序列S1、S2 计算S1的K、V 计算S2的Q 根据K和Q计算注意力矩阵 将V应用于注意力矩阵 输出的序列长度与S2一致 $$ \\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1 $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/cross_attention/","summary":"\u003ch2 id=\"cross-attention\"\u003eCross Attention\u003c/h2\u003e\n\u003cp\u003e来自\u003ca href=\"https://vaclavkosar.com/ml/cross-attention-in-transformer-architecture\"\u003e博客\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"简介\"\u003e简介\u003c/h3\u003e\n\u003cp\u003eCross Attention是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e融合两种不同的嵌入序列的注意力机制\u003c/li\u003e\n\u003cli\u003e两个序列必须包含\u003cstrong\u003e相同的维度\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e两个序列可以来自不同的模态（例如文本、图像、声音）\u003c/li\u003e\n\u003cli\u003e其中一个序列作为\u003cstrong\u003eQuery的输入\u003c/strong\u003e，决定了输出的长度\u003c/li\u003e\n\u003cli\u003e另一个序列作为\u003cstrong\u003eKey和Value的输入\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cross-attention-vs-self-attention\"\u003eCross Attention vs Self-attention\u003c/h3\u003e\n\u003cp\u003eCross Attention与Self-attention只有输入不同。Cross Attention输入为两个维度相同的嵌入序列；Self-attention输入为一个嵌入序列，其KQV均由该序列生成。\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"cross attention\" loading=\"lazy\" src=\"/cspaulia-blog/posts/cross_attention/cross_attention.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"cross-attention算法\"\u003eCross Attention算法\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e拥有两个序列S1、S2\u003c/li\u003e\n\u003cli\u003e计算S1的K、V\u003c/li\u003e\n\u003cli\u003e计算S2的Q\u003c/li\u003e\n\u003cli\u003e根据K和Q计算注意力矩阵\u003c/li\u003e\n\u003cli\u003e将V应用于注意力矩阵\u003c/li\u003e\n\u003cli\u003e输出的序列长度与S2一致\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e$$\n\\pmb{\\text{softmax}}((W_Q S_2)(W_K S_1)^\\mathrm{T})W_v S_1\n$$\u003c/p\u003e","title":"交叉注意力机制"},{"content":"GELU $$ \\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3))) $$\n优点 具有更光滑的导数：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。 可以提高模型的性能：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。 可以加速收敛：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。 ","permalink":"http://localhost:1313/cspaulia-blog/posts/activation/","summary":"\u003ch3 id=\"gelu\"\u003eGELU\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{GELU}(x) = 0.5x(1+\\tanh(\\sqrt{\\frac{2}{\\pi}}(x+0.044715x^3)))\n$$\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"GELU_Derivative\" loading=\"lazy\" src=\"/cspaulia-blog/posts/activation/GELU_Derivative.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"优点\"\u003e优点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e具有更光滑的导数\u003c/strong\u003e：GELU函数的导数是连续的，这使得在训练深度神经网络时可以更容易地传播梯度，避免了ReLU函数在$x=0$处的导数不连续的问题，从而减少了训练过程中出现的梯度消失问题。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以提高模型的性能\u003c/strong\u003e：在实际任务中，使用GELU函数的模型通常比使用ReLU函数的模型表现更好，尤其是在自然语言处理和计算机视觉任务中。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以加速收敛\u003c/strong\u003e：GELU函数在激活函数的非线性变换中引入了类似于sigmoid函数的变换，这使得GELU函数的输出可以落在一个更广的范围内，有助于加速模型的收敛速度。\u003c/li\u003e\n\u003c/ol\u003e","title":"收集N个激活函数"},{"content":"Layer Normalization 在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取不同样本的同一个通道的特征做归一化；LN则是如左侧所示，它取的是同一个样本的不同通道做归一化\n1. BN的问题 1.1. BN与Batch Size BN是按照样本数计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\n1.2. BN与RNN 在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\n另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\n2. LN详解 2.1. MLP中的LN 先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\n$$ \\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2} $$\n注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$ 可以得到归一化后的值：\n$$ \\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1} $$\n其中$\\epsilon$是一个很小的小数，防止除0。\n在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\n$$ h^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2} $$\n合并公式(1)和(2)并忽略参数$l$，有：\n$$ h=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b) $$\n2.2. RNN中的LN 对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\n$$ \\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t} $$\n接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\n$$ h^t=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a^t-\\mu^t) + b) ~~~~~~ \\mu^{t} = \\frac{1}{H} \\sum_{i=1}^{H} a^t_i ~~~~~~~ \\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^t_i-\\mu^t)^2} $$\n","permalink":"http://localhost:1313/cspaulia-blog/posts/norm/","summary":"\u003ch3 id=\"layer-normalization\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003eLayer Normalization\u003c/span\u003e\u003c/h3\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"LNvsBN.jpg\" alt=\"LNvsBN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在上图中，$N$表示样本轴，$C$表示通道轴，$F$是每个通道的特征数量。BN如右侧所示，它是取\u003cstrong\u003e不同样本的同一个通道\u003c/strong\u003e的特征做归一化；LN则是如左侧所示，它取的是\u003cstrong\u003e同一个样本的不同通道\u003c/strong\u003e做归一化\u003c/p\u003e\n\u003ch4 id=\"1-bn的问题\"\u003e1. BN的问题\u003c/h4\u003e\n\u003ch5 id=\"11-bn与batch-size\"\u003e1.1. BN与Batch Size\u003c/h5\u003e\n\u003cp\u003eBN是按照\u003cstrong\u003e样本数\u003c/strong\u003e计算归一化统计量的，当样本数很少时，比如说只有4个，这四个样本的均值和方差便不能反映全局的统计分布息，所以基于少量样本的BN的效果会变得很差。\u003c/p\u003e\n\u003ch5 id=\"12-bn与rnn\"\u003e1.2. BN与RNN\u003c/h5\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"RNN.jpg\" alt=\"RNN\" /\u003e\n\u003c/p\u003e\n\u003cp\u003e在一个batch中，通常各个样本的长度都是不同的，当统计到比较靠后的时间片时，例如上图中$t\u0026gt;4$时，这时只有一个样本还有数据，基于这个样本的统计信息不能反映全局分布，所以这时BN的效果并不好。\u003c/p\u003e\n\u003cp\u003e另外如果在测试时我们遇到了长度大于任何一个训练样本的测试样本，我们无法找到保存的归一化统计量，所以BN无法运行。\u003c/p\u003e\n\u003ch4 id=\"2-ln详解\"\u003e2. LN详解\u003c/h4\u003e\n\u003ch5 id=\"21-mlp中的ln\"\u003e2.1. MLP中的LN\u003c/h5\u003e\n\u003cp\u003e先看MLP中的LN。设$H$是一层中隐层节点的数量，$l$是MLP的层数，我们可以计算LN的归一化统计量$\\mu$和$\\sigma$：\u003c/p\u003e\n\u003cp\u003e$$\n\\mu^{l} = \\frac{1}{H} \\sum_{i=1}^{H} a^l_i ~~~~~~~\n\\sigma^{l} = \\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}(a^l_i-\\mu^l)^2}\n$$\u003c/p\u003e\n\u003cp\u003e注意上面统计量的计算是和样本数量没有关系的，它的数量只取决于隐层节点的数量，所以只要隐层节点的数量足够多，我们就能保证LN的归一化统计量足够具有代表性。通过$\\mu^{l}$和$\\sigma^{l}$\n可以得到归一化后的值：\u003c/p\u003e\n\u003cp\u003e$$\n\\hat{a}^l = \\frac{a^l-\\mu^l}{\\sqrt{(\\sigma^l)^2+\\epsilon}} \\tag{1}\n$$\u003c/p\u003e\n\u003cp\u003e其中$\\epsilon$是一个很小的小数，防止除0。\u003c/p\u003e\n\u003cp\u003e在LN中我们也需要一组参数来保证归一化操作不会破坏之前的信息，在LN中这组参数叫做增（gain）$g$和偏置（bias）$b$。假设激活函数为$f$，最终LN的输出为：\u003c/p\u003e\n\u003cp\u003e$$\nh^l = f(g^l \\odot \\hat{a}^l + b^l) \\tag{2}\n$$\u003c/p\u003e\n\u003cp\u003e合并公式(1)和(2)并忽略参数$l$，有：\u003c/p\u003e\n\u003cp\u003e$$\nh=f(\\frac{g}{\\sqrt{\\sigma^2+\\epsilon}} \\odot (a-\\mu) + b)\n$$\u003c/p\u003e\n\u003ch5 id=\"22-rnn中的ln\"\u003e2.2. RNN中的LN\u003c/h5\u003e\n\u003cp\u003e对于RNN时刻$t$时的节点，其输入是$t-1$时刻的隐层状态$h^t$和$t$时刻的输入数据$\\text{x}_t$，可以表示为：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{a}^t = W_{hh}h^{t-1}+W_{xh}\\text{x}^{t}\n$$\u003c/p\u003e\n\u003cp\u003e接着我们便可以在$\\text{a}^t$上采取和1.1节中完全相同的归一化过程：\u003c/p\u003e","title":"收集N个Norm方法"},{"content":"上传本地文件到Github库 1. 在GitHub上创建仓库（远程仓库） 在 GitHub 上创建一个新的代码仓库\n2. 安装/配置Git 安装略，配置 Git：\ngit config --global user.name \u0026quot;Your Name\u0026quot; git config --global user.email \u0026quot;your_email@example.com\u0026quot; 这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;your_email@example.com\u0026rdquo; 分别为你的用户名和邮箱地址\n检查 Git 是否已经配置用户名和邮箱：\ngit config --global user.name git config --global user.email 3. 上传文件到Github（本地仓库–\u0026gt;远程仓库） 初始化 Git 仓库, 执行以下命令：\ngit init 将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\ngit add csj_project/ #或者输入 git add . 将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\ngit commit -m \u0026quot;Initial commit\u0026quot; 在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\n将本地仓库与远程仓库进行关联，执行以下命令：\ngit remote add origin \u0026lt;远程仓库链接\u0026gt; \u0026lt;远程仓库链接\u0026gt;就是你刚才复制的仓库的 SSH 或 HTTPS 链接，例如我的就是： https://github.com/CSPaulia/(库的名称).git 完整命令 git remote add origin https://github.com/CSPaulia/(库的名称).git 将本地仓库中的代码推送到远程仓库中，执行以下命令：\n#git push origin 分支名 #完整命令 git push -u origin master ","permalink":"http://localhost:1313/cspaulia-blog/posts/github-tips/","summary":"\u003ch2 id=\"上传本地文件到github库\"\u003e上传本地文件到Github库\u003c/h2\u003e\n\u003ch3 id=\"1-在github上创建仓库远程仓库\"\u003e1. 在GitHub上创建仓库（远程仓库）\u003c/h3\u003e\n\u003cp\u003e在 GitHub 上创建一个新的代码仓库\u003c/p\u003e\n\u003ch3 id=\"2-安装配置git\"\u003e2. 安装/配置Git\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装略，配置 Git：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name \u0026quot;Your Name\u0026quot;\n git config --global user.email \u0026quot;your_email@example.com\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里的 \u0026ldquo;Your Name\u0026rdquo; 和 \u0026ldquo;\u003ca href=\"mailto:your_email@example.com\"\u003eyour_email@example.com\u003c/a\u003e\u0026rdquo; 分别为你的用户名和邮箱地址\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\n\u003cp\u003e检查 Git 是否已经配置用户名和邮箱：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git config --global user.name\n git config --global user.email\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-上传文件到github本地仓库远程仓库\"\u003e3. 上传文件到Github（本地仓库–\u0026gt;远程仓库）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e初始化 Git 仓库, 执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git init\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将 csj_project 项目文件夹添加到本地仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git add csj_project/\n #或者输入\n git add .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将当前工作目录中的更改保存到本地代码仓库中，执行以下命令：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e git commit -m \u0026quot;Initial commit\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e在 GitHub 上创建一个新的远程仓库，获取复制该仓库的 SSH 或 HTTPS 链接\u003c/p\u003e","title":"如何上传本地文件到Github库"},{"content":"FLOPs 注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\n","permalink":"http://localhost:1313/cspaulia-blog/posts/params/","summary":"\u003ch3 id=\"flops\"\u003eFLOPs\u003c/h3\u003e\n\u003cp\u003e注意s小写，是floating point operations的缩写（这里的小s则表示复数），表示浮点运算数，理解为计算量。可以用来衡量算法/模型的复杂度\u003c/p\u003e","title":"收集N个模型参数衡量指标"},{"content":"回复流程 整理罗列所有审稿人的意见，并进行分类\n约老师、约同门师兄姐妹开始讨论，给出回答\n整理所有需要补充的实验，估计大概要用到多少的算力资源\n写rebuttal文档\n论据准备\n理论论证：给出详细的推导过程，把过程给师兄、老师看 实验论证：多次检查实验结果 引用论证：明确给出论据的位置（把arXiv的链接贴出来） 表达要求\n用第二人称称呼审稿人（拉近距离） 态度诚恳、有理有据、逻辑清晰、有人情味的表达 撰写流程\n先写中文回答 DeepL翻译 再GPT润色 写完之后，给老师、师兄过目！！！！再统一进行回复。\n如果审稿人继续回复，则继续讨论：\n包括继续和师兄、老师进行一对一的交流 更新rebuttal文档 ","permalink":"http://localhost:1313/cspaulia-blog/posts/rebuttal/writing-tips-rebuttal/","summary":"\u003ch2 id=\"回复流程\"\u003e回复流程\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理罗列\u003c/strong\u003e所有审稿人的意见，并进行分类\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e约老师、约同门师兄姐妹开始\u003cstrong\u003e讨论\u003c/strong\u003e，给出回答\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e整理所有需要补充的实验\u003c/strong\u003e，估计大概要用到多少的\u003cstrong\u003e算力资源\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写rebuttal文档\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e论据准备\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e理论论证：给出详细的推导过程，把过程给师兄、老师看\u003c/li\u003e\n\u003cli\u003e实验论证：多次检查实验结果\u003c/li\u003e\n\u003cli\u003e引用论证：明确给出论据的位置（把arXiv的链接贴出来）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e表达要求\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e用第二人称称呼审稿人（拉近距离）\u003c/li\u003e\n\u003cli\u003e态度诚恳、有理有据、逻辑清晰、有人情味的表达\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e撰写流程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e先写中文回答\u003c/li\u003e\n\u003cli\u003eDeepL翻译\u003c/li\u003e\n\u003cli\u003e再GPT润色\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e写完之后，\u003cstrong\u003e给老师、师兄过目\u003c/strong\u003e！！！！再统一进行回复。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e如果审稿人继续回复，则继续讨论：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e包括继续和师兄、老师进行一对一的交流\u003c/li\u003e\n\u003cli\u003e更新rebuttal文档\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"论文回复方法（Rebuttal Method）"},{"content":"分类任务损失函数 交叉熵（Cross Entropy） $$ \\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x)) $$\n交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\n在实际计算中，\n$$ \\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x)) = - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x)) $$\n其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\n举个例子，\n预测（softmax归一化后） 真实值 [0.1, 0.2, 0.7] [0, 0, 1] [0.3, 0.4, 0.3] [0, 1, 0] [0.1, 0.2, 0.7] [1, 0, 0] 计算损失函数值：\n$$ \\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36 $$\n$$ \\text{sample 2 Loss} = - (0 \\times \\log{0.3} + 1 \\times \\log{0.4} + 0 \\times \\log{0.3}) = 0.92 $$\n$$ \\text{sample 3 Loss} = - (1 \\times \\log{0.1} + 0 \\times \\log{0.2} + 0 \\times \\log{0.7}) = 2.30 $$\n$$ \\text{L} = \\frac{0.36+0.92+2.3}{3} = 1.19 $$\nKL 散度（KL Divergence） $$ \\text{D}_{\\text{KL}}(q | p) = - \\sum_i q(x) \\log_2(p(x)) + \\sum_x p(x) \\log_2(p(x)) = \\text{H}_p(q) - \\text{H}(p) $$\n在交叉熵的基础上减去了p的熵，衡量了两个分布之间的距离。\n在神经网络的训练当中，由于p往往是标签的分布，p的熵值是确定的。所以KL散度和交叉熵是等价的。但是由于交叉熵不惜要计算信息熵，计算更加简单，所以交叉熵使用更加广泛。\n二值交叉熵（Binary Cross Entropy） 模型预测结果：\n$$ P_\\theta(y=1)=\\theta ~~~~~~~ P_\\theta(y=0)=1 - \\theta $$\n合并上面两个式子，得到：\n$$ p_\\theta(y) = \\theta^y(1-\\theta)^{(1-y)} $$\n观测到这些数据点的对数似然为：\n$$ l(\\theta) = \\log \\prod^N_{i=1} p_\\theta(y_i) = \\log \\prod^N_{i=1}\\theta^y(1-\\theta)^{(1-y)} = \\sum_{i=1}^N [y_i\\log \\theta + (1-y_i)\\log(1-\\theta)] $$\n这个损失函数就是$y_i$与$\\theta$的交叉熵$H_y(\\theta)$。\n平衡交叉熵（Balenced Cross Entropy） 为了解决样本数量不平衡这个问题，我们可以选择给Cross Entropy添加权重。以二分类问题举例，Binary Cross Entropy已经介绍过Binary Cross Entropy：\n$$ \\text{L} = - \\sum_{i=1}^N [y_i\\log p + (1-y_i)\\log(1-p)] $$\n改写一下，\n$$ \\text{L} = \\begin{cases} -\\log(p) \u0026amp; \\text{if}~y=1 \\\\ -\\log(1-p) \u0026amp; \\text{otherwise} \\end{cases} $$\n再改写一下，\n$$ p_t= \\begin{cases} \u0026amp; p \u0026amp; \\text{if}~y=1 \\\\ \u0026amp; 1-p \u0026amp; \\text{otherwise} \\end{cases} $$\n$$ \\text{L} = -\\log(p_t) $$\n添加权重，\n$$ \\text{L} = -\\alpha_t\\log(p_t) $$\n其中$y=1$时$\\alpha_t=\\alpha$；$y=0$时$\\alpha_t=1-\\alpha$。$\\frac{\\alpha}{1-\\alpha}=\\frac{n}{m}$，$n$为$y=0$的样本（负样本）个数，$m$为$y=1$的样本（正样本）个数。\nBalenced Cross Entropy确实解决了样本不均衡问题，但并未解决样本难易问题。为解决这个问题，详见Focal Loss.\nFocal Loss $$ \\text{FL}(p_t) = (1-p_t)^\\gamma\\log(p_t) $$\n$p_t$是模型预测的结果的类别概率值。$−\\log(p_t)$和交叉熵损失函数一致，因此当前样本类别对应的那个$p_t$如果越小，说明预测越不准确，那么$(1-p_t)^{\\gamma}$这一项就会增大，这一项也作为困难样本的系数，预测越不准，Focal Loss越倾向于把这个样本当作困难样本，这个系数也就越大，目的是让困难样本对损失和梯度的贡献更大。\n前面的$\\alpha_t$是类别权重系数。如果你有一个类别不平衡的数据集，那么你肯定想对数量少的那一类在loss贡献上赋予一个高权重，这个$\\alpha_t$就起到这样的作用。因此，$\\alpha_t$应该是一个向量，向量的长度等于类别的个数，用于存放各个类别的权重。一般来说$\\alpha_t$中的值为每一个类别样本数量的倒数，相当于平衡样本的数量差距\nLovasz Loss Lovasz Loss的推导 IoU (intersection-over-union，也叫jaccard index)是自然图像分割比赛中常用的一个衡量分割效果的评价指标，所以一个自然的想法就是能否将IoU作为loss function来直接优化。交并比公式：\n$$ J_c(y^*, \\widetilde{y}) = \\frac{ | { y^* = c } \\cap { \\widetilde{y} = c } | }{ | { y^* = c } \\cup { \\widetilde{y} = c } | } $$\n其中$y^{*}$表示Ground Truth标签，$\\widetilde{y}$表示预测标签，$\\vert \\cdot \\vert$表示集合中的元素个数。可以看出上式的值是介于0到1之间的，由此可以设计出损失函数：\n$$ \\Delta_{J_c}(y^{*},\\widetilde{y})=1-J_c(y^{*},\\widetilde{y}) $$\n这个损失函数是离散的，无法直接求导，需要对其做光滑延拓。\n改写一下$\\Delta_{J_c}$,\n$$ \\Delta_{J_c} = 1-J_c(y^{*},\\widetilde{y}) = \\frac{\\vert M_c \\vert}{\\vert {y^{*}=c} \\cup M_c \\vert} \\tag{1} $$\n其中，$M_c(y^{*},\\widetilde{y}) = {y^{*}=c,\\widetilde{y}\\neq c} \\cup {y^{*} \\neq c,\\widetilde{y}=c}$，$M_c$是损失函数的自变量，它表达网络分割结果与Ground Truth标签不匹配的集合。$M_c$的定义域为${0,1}^p$，即$M_c \\in {0,1}^p$，$p$表示集合$M_c$中像素的个数。\n由于(1)是次模（submodular）函数，故可以对其做光滑延拓。\n定义1 若一个集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$对于所有的集合$A,B \\in {0,1}^p$满足\n$$ \\Delta(A) + \\Delta(B) \\geq \\Delta(A \\cup B) + \\Delta(A \\cap B) $$\n则我们称$\\Delta$是次模函数。\n定义2 Lovasz extension 现存在一集合函数$\\Delta:{0,1}^p \\rightarrow \\mathbb{R}$且$\\Delta(\\pmb{0})=0$，则其Lovasz extension为\n$$ \\overline{\\Delta} = \\sum_{i=1}^p m_i g_i(\\pmb{m}) \\tag{2} $$\n$$ g_i(m) = \\Delta({\\pi_1,\\cdots,\\pi_i}) - \\Delta({\\pi_1,\\cdots,\\pi_{i-1}}) $$\n$\\pi$是一个数组，根据元素$\\pmb{m}$降序排序。例如，$x_{\\pi_1} \\geq x_{\\pi_2} \\geq \\cdots \\geq x_{\\pi_p}$。\n此时$\\overline{\\Delta}$已经是一个连续、分段线性的函数了，可以直接对误差$m$求导，导数为$g(m)$。\nLovasz Loss在多类分割中的应用 假设$F_i(c)$表示的是模型最后输出的像素$i$预测为类别$c$的非归一化分数，则可以通过softmax函数将$F_i(c)$归一化得到像素$i$预测为类别$c$的概率：\n$$ f_i(c) = \\frac{e^{F_i(c)}}{\\sum_{c\u0026rsquo; \\in C} e^{F_i(c\u0026rsquo;)}} $$\n那么(2)中的$m_i(c)$可以定义为\n$$ m_i(c) = \\begin{cases} \u0026amp; 1-f_i(c) \u0026amp; \\text{if}~c=y_i^{*} \\\\ \u0026amp; f_i(c) \u0026amp; \\text{otherwise} \\end{cases} $$\n那么损失函数为\n$$ loss(\\pmb{f}(c)) = \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\n考虑到类别平均mIoU的计算方式，最终的损失函数为\n$$ loss(\\pmb{f}) = \\frac{1}{\\vert C \\vert} \\sum_{c \\in C} \\overline{\\Delta_{J_c}}(\\pmb{m}(c)) $$\nLovasz Loss在多类分割中的代码流程 步骤1 计算预测结果的误差\nsigns = 2. * predictions.float() - 1. errors = (1. - logits * Variable(signs)) errors_sorted, perm = torch.sort(errors, dim=0, descending=True) 这一步得到公式(2)中的$m_i$。\n步骤2 计算IoU得分\ngts = gt_sorted.sum() intersection = gts - gt_sorted.float().cumsum(0) union = gts + (1 - gt_sorted).float().cumsum(0) jaccard = 1. - intersection / union 这一步得到公式(1)的值，即IoU得分。\n步骤3 根据IoU得分计算Lovasz extension的梯度\njaccard[1:p] = jaccard[1:p] - jaccard[0:-1] 这一步得到公式(2)中的$g_i(\\pmb{m})$。\n步骤4 计算Loss\nloss = torch.dot(F.relu(errors_sorted), Variable(grad)) 这一步得到公式(2)的值。\n","permalink":"http://localhost:1313/cspaulia-blog/posts/loss/","summary":"\u003ch2 id=\"分类任务损失函数\"\u003e\u003cspan style=\"color: #CC7E40;\"\u003e分类任务损失函数\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"交叉熵cross-entropy\"\u003e\u003cspan style=\"color: #DFC08A;\"\u003e交叉熵（Cross Entropy）\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e$$\n\\text{H}_p(q) = \\sum_x q(x) \\log_2(\\frac{1}{p(x)}) = - \\sum_x q(x) \\log_2(p(x))\n$$\u003c/p\u003e\n\u003cp\u003e交叉熵为我们提供了一种表达两种概率分布的差异的方法。p和q的分布越不相同，p相对于q的交叉熵将越大于p的熵。\u003c/p\u003e\n\u003cp\u003e在实际计算中，\u003c/p\u003e\n\u003cp\u003e$$\n\\text{L} = - \\sum_x q(y|x) \\log_2(p(y|x))\n= - \\frac{1}{N} \\sum_x \\sum_c y_{xc} \\log_2(p(y_c|x))\n$$\u003c/p\u003e\n\u003cp\u003e其中，$N$表示样本数量，$x$表示样本，$c$表示类别，$y_{xc}$表示类别为$c$时$x$的预测标签，只有$c$与真实标签的类别$\\hat{c}$相同时，$y_{x\\hat{c}} = 1$，即$q(y_{\\hat{c}}|x)=1/N$，其余类别$y_{xc} = 0$，即$q(y_c|x)=0/N=0$。\u003c/p\u003e\n\u003cp\u003e举个例子，\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e预测（softmax归一化后）\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e真实值\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 0, 1]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.3, 0.4, 0.3]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0, 1, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e[0.1, 0.2, 0.7]\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e[1, 0, 0]\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e计算损失函数值：\u003c/p\u003e\n\u003cp\u003e$$\n\\text{sample 1 Loss} = - (0 \\times \\log{0.1} + 0 \\times \\log{0.2} + 1 \\times \\log{0.7}) = 0.36\n$$\u003c/p\u003e","title":"记录100种损失函数（Loss Function）"}]